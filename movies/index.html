<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NETLII | Movies & TV</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet">
    
    <style>
      :root {
        /* Exact variables from your browser index.html */
        --glass: rgba(255, 255, 255, 0.5);
        --border: rgba(255, 255, 255, 0.3);
        --accent: #000;
      }

      * { margin: 0; padding: 0; box-sizing: border-box; }

      body {
        margin: 0;
        font-family: 'Nunito', sans-serif;
        /* Using your site's standard background */
        background: url('netlii-bg.avif') no-repeat center center fixed;
        background-size: cover;
        min-height: 100vh;
        color: var(--accent);
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .container { width: 100%; max-width: 1400px; padding: 40px 20px; }

      .header { text-align: center; margin-bottom: 50px; }
      
      .header h1 {
        font-size: 3.5rem;
        letter-spacing: 12px;
        font-weight: 900;
        text-transform: uppercase;
        margin-bottom: 30px;
        color: var(--accent);
      }

      /* Pill-style search bar matching your #url-input */
      .search-container { max-width: 600px; margin: 0 auto 30px; }
      
      .search-input {
        width: 100%;
        height: 54px;
        border-radius: 50px;
        border: 2px solid var(--accent);
        padding: 0 25px;
        background: rgba(255, 255, 255, 0.9);
        font-size: 1rem;
        font-weight: 700;
        outline: none;
        transition: 0.3s;
      }

      /* Filter buttons match your .btn-circle/pill aesthetic */
      .filter-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px; }
      
      .filter-btn {
        padding: 12px 25px;
        border-radius: 50px;
        border: 2px solid var(--accent);
        background: white;
        font-weight: 800;
        cursor: pointer;
        transition: 0.2s;
        text-transform: uppercase;
      }

      .filter-btn.active, .filter-btn:hover {
        background: var(--accent);
        color: white;
      }

      /* Movie grid with Glassmorphism cards */
      .movies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 30px;
      }

      .movie-card {
        background: var(--glass);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 2px solid var(--accent);
        border-radius: 25px; /* Matches tab-frame radius */
        overflow: hidden;
        transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
      }

      .movie-card:hover {
        transform: translateY(-10px);
        background: rgba(255, 255, 255, 0.8);
      }

      .movie-poster {
        width: 100%;
        aspect-ratio: 2/3;
        object-fit: cover;
        border-bottom: 2px solid var(--accent);
      }

      .movie-info { padding: 20px; text-align: center; }

      .movie-title { font-size: 1.1rem; font-weight: 900; margin-bottom: 5px; }

      .movie-date { font-size: 0.85rem; font-weight: 700; opacity: 0.6; }

      .movie-rating { color: var(--accent); font-weight: 900; margin-top: 5px; }

      /* Fullscreen Player matches the browser Frame/Overlay */
      .player-container {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.98);
        z-index: 9999;
        display: none;
        flex-direction: column;
      }
      
      .player-container.show { display: flex; }

      .player-header {
        padding: 20px;
        background: #fff;
        border-bottom: 2px solid var(--accent);
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
      }
      
      .player-title { color: #000; font-weight: 900; font-size: 1.5rem; }

      .close-btn {
        position: absolute;
        right: 20px;
        background: var(--accent);
        color: #fff;
        border: none;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .selector-row {
        padding: 15px;
        background: #f0f0f0;
        display: flex;
        justify-content: center;
        gap: 15px;
        border-bottom: 2px solid var(--accent);
      }

      .selector-row select {
        padding: 8px 15px;
        border-radius: 10px;
        border: 2px solid var(--accent);
        font-weight: 700;
        font-family: 'Nunito';
      }
      
      .player-wrapper { flex: 1; padding: 20px; background: #000; display: flex; justify-content: center; }
      iframe { width: 100%; max-width: 1200px; height: 100%; border: 3px solid #fff; border-radius: 20px; }
      
      /* Pagination matches your browser button style */
      #pagination button {
        padding: 10px 25px;
        border-radius: 50px;
        border: 2px solid var(--accent);
        background: #fff;
        font-weight: 900;
        cursor: pointer;
        margin: 0 10px;
      }
      #pagination button:disabled { opacity: 0.3; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>NETLII</h1>
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search movies and TV shows...">
        </div>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="popular">Popular</button>
            <button class="filter-btn" data-filter="trending">Trending</button>
            <button class="filter-btn" data-filter="top_rated">Top Rated</button>
            <button class="filter-btn" data-filter="now_playing">Cinema</button>
            <button class="filter-btn" data-filter="upcoming">Upcoming</button>
        </div>
    </div>
    
    <div id="loading" style="text-align: center; padding: 50px; font-weight: 900; display: none;">LOADING...</div>
    <div id="moviesGrid" class="movies-grid"></div>
    <div id="pagination" style="text-align:center; padding: 40px 0;"></div>
</div>

<div class="player-container" id="playerContainer">
    <div class="player-header">
        <div class="player-title" id="playerTitle">Loading...</div>
        <button class="close-btn" id="closeBtn"><ion-icon name="close" style="font-size: 24px;"></ion-icon></button>
    </div>
    <div id="seasonEpisodeSelector" class="selector-row" style="display:none">
        <select id="seasonSelect"></select>
        <select id="episodeSelect"></select>
    </div>
    <div class="player-wrapper">
        <iframe id="playerIframe" allowfullscreen=""></iframe>
    </div>
</div>

<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>

<script>
    const k="2713804610e1e236b1cf44bfac3a7776", b="https://api.themoviedb.org/3", i="https://image.tmdb.org/t/p/w500";
    let f="popular", p=1, t=null, s=null;

    const l=document.getElementById('loading'), g=document.getElementById('moviesGrid'), q=document.getElementById('searchInput'),
    fb=document.querySelectorAll('.filter-btn'), pc=document.getElementById('playerContainer'), ifm=document.getElementById('playerIframe'),
    pt=document.getElementById('playerTitle'), cb=document.getElementById('closeBtn'),
    ss=document.getElementById('seasonEpisodeSelector'), s1=document.getElementById('seasonSelect'), e1=document.getElementById('episodeSelect');

    function load(){
        l.style.display='block'; g.innerHTML='';
        let u=`${b}/movie/${f}?api_key=${k}&page=${p}`;
        if(f==='trending') u=`${b}/trending/all/day?api_key=${k}&page=${p}`;
        fetch(u).then(r=>r.json()).then(d=>show(d.results, d.total_pages));
    }

    function search(v){
        l.style.display='block'; g.innerHTML='';
        fetch(`${b}/search/multi?api_key=${k}&query=${encodeURIComponent(v)}&page=${p}`).then(r=>r.json()).then(d=>show(d.results, d.total_pages));
    }

    function show(m, tp){
        l.style.display='none'; g.innerHTML='';
        m.forEach(mv=>{
            if(!mv.poster_path) return;
            let c=document.createElement('div'); c.className='movie-card';
            c.innerHTML=`
                <img class="movie-poster" src="${i+mv.poster_path}" alt="${mv.title||mv.name}">
                <div class="movie-info">
                    <div class="movie-title">${mv.title||mv.name}</div>
                    <div class="movie-date">${(mv.release_date||mv.first_air_date||'').split('-')[0]}</div>
                    <div class="movie-rating">⭐ ${mv.vote_average?mv.vote_average.toFixed(1):'—'}</div>
                </div>
            `;
            c.onclick=()=>open(mv);
            g.appendChild(c);
        });
        pag(tp);
    }

    function pag(tp){
        let d=document.createElement('div');
        let prev=document.createElement('button'); prev.textContent='PREV'; prev.disabled=p===1;
        prev.onclick=()=>{p--; q.value?search(q.value):load(); window.scrollTo(0,0)};
        let info=document.createElement('span'); info.textContent=`${p} / ${tp}`; info.style.fontWeight="900";
        let next=document.createElement('button'); next.textContent='NEXT'; next.disabled=p===tp;
        next.onclick=()=>{p++; q.value?search(q.value):load(); window.scrollTo(0,0)};
        d.append(prev,info,next);
        document.getElementById('pagination').innerHTML='';
        document.getElementById('pagination').appendChild(d);
    }

    async function open(mv){
        t=mv; pt.textContent=mv.title||mv.name; pc.classList.add('show');
        let type=mv.media_type|| (mv.title?'movie':'tv');
        if(type==='tv'){
            let r=await fetch(`${b}/tv/${mv.id}?api_key=${k}`); let d=await r.json();
            s1.innerHTML=''; for(let i=1;i<=d.number_of_seasons;i++){ s1.add(new Option(`Season ${i}`,i)); }
            ss.style.display='flex'; eps(mv.id,1);
        } else { ss.style.display='none'; play(mv.id,'movie'); }
    }

    async function eps(id,s){
        let r=await fetch(`${b}/tv/${id}/season/${s}?api_key=${k}`); let d=await r.json();
        e1.innerHTML=''; for(let i=1;i<=d.episodes.length;i++){ e1.add(new Option(`Episode ${i}`,i)); }
        play(id,'tv',s,1);
    }

    function play(id,type,s=null,e=null){
        ifm.src=type==='tv'?`https://multiembed.mov/?tmdb=1&video_id=${id}&s=${s}&e=${e}&autoplay=1`:`https://multiembed.mov/?tmdb=1&video_id=${id}&autoplay=1`;
    }

    cb.onclick=()=>{pc.classList.remove('show'); ifm.src=''; t=null;};
    fb.forEach(x=>x.onclick=()=>{fb.forEach(y=>y.classList.remove('active')); x.classList.add('active'); f=x.dataset.filter; p=1; load();});
    q.oninput=e=>{clearTimeout(s); let v=e.target.value.trim(); if(!v){p=1; load(); return} s=setTimeout(()=>search(v),600)};
    s1.onchange=()=>eps(t.id,+s1.value);
    e1.onchange=()=>play(t.id,'tv',+s1.value,+e1.value);

    load();
</script>

</body>
</html>
